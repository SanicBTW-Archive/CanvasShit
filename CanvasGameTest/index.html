<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!--totally not taken from a html generated file from haxe-->
        <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

        <script>
            window.addEventListener ("touchmove", function (event) { event.preventDefault (); }, { capture: false, passive: false });
            if (typeof window.devicePixelRatio != 'undefined' && window.devicePixelRatio > 2) {
                var meta = document.getElementById ("viewport");
                meta.setAttribute ('content', 'width=device-width, initial-scale=' + (2 / window.devicePixelRatio) + ', user-scalable=no');
            }
        </script>

        <script>
            const detectDeviceType = () => /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
            ? 'Mobile'
            : 'Desktop';

            var outerStyle = document.createElement("style");
            if(detectDeviceType() == "Desktop")
            {
                outerStyle.innerHTML = `.outer { 
                    width: 100%; height: 97.9vh; display: flex; justify-content: center; align-items: center;
                }`;
            }
            else
            {
                outerStyle.innerHTML = `.outer { 
                    width: 100%; height: 90vh; display: flex; justify-content: center; align-items: center;
                }`;
            }
            document.head.appendChild(outerStyle);

        </script>

        <script src="//cdn.jsdelivr.net/npm/eruda"></script>
        <script>eruda.init();</script>

        <link rel="stylesheet" href="./source/index.css">

        <script src="./source/Notifications.js" defer></script>

        <script src="./source/Game.js" defer></script>

        <title>Canvas game testing</title>
    </head>
    <body onload="startGame()" class="dark">
        <div class="outer">
            <div id="notificationsPanel" class="notificationsPanel">
                <div style="margin-left: 1rem; margin-right: 1rem;">
                    <h1 id="notificationText"></h1>
                    <p id="notificationSubText"></p>
                </div>
                <div style="background-color: dimgray; width: 100%;"> <div id="dismissProgress" style="width: 0%; height: 5px; transition: 1s; background-color: lightgreen;"> </div> </div>
            </div>

            <div id="mainDiv">
            </div>
        </div>
        <div style="position: fixed; bottom: 0; right: 0; background-color: black; color: white; opacity: 50%; margin: 1rem; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: larger;">
            <div style="margin: 1rem;">
                <p>Initialized</p>
            </div>
            <div id="debugger" style="margin: 1rem">
                <p>Collision: <span id="curCol">?</span></p>
                <p>X: <span id="curX">?</span></p>
                <p>Y: <span id="curY">?</span></p>
            </div>
        </div>
    </body>
</html>